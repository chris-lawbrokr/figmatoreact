Recommended architecture (simple but scalable)
next-app/
â”œâ”€ app/
â”‚  â”œâ”€ api/
â”‚  â”‚  â””â”€ figma/
â”‚  â”‚     â””â”€ sync/route.ts
â”‚  â””â”€ page.tsx
â”œâ”€ lib/
â”‚  â”œâ”€ figma/
â”‚  â”‚  â”œâ”€ client.ts
â”‚  â”‚  â”œâ”€ extractors/
â”‚  â”‚  â”‚  â”œâ”€ colors.ts
â”‚  â”‚  â”‚  â”œâ”€ typography.ts
â”‚  â”‚  â”‚  â””â”€ spacing.ts
â”‚  â””â”€ tokens/
â”‚     â””â”€ writeTokens.ts
â”œâ”€ tokens/
â”‚  â”œâ”€ figma.raw.json
â”‚  â”œâ”€ colors.json
â”‚  â””â”€ typography.json
â”œâ”€ .env.local

Step 1 â€” Create the Next app
npx create-next-app figma-tokens
cd figma-tokens


Choose:

âœ” App Router

âœ” TypeScript

âœ” Tailwind (optional but recommended)

Step 2 â€” Environment variables

.env.local

FIGMA_TOKEN=your_figma_access_token
FIGMA_FILE_KEY=your_file_key


âš ï¸ Never expose this to the client
Weâ€™ll only access it in API routes.

Step 3 â€” Figma API client (server-only)
lib/figma/client.ts
const BASE_URL = "https://api.figma.com/v1";

export async function figmaFetch(path: string) {
  const res = await fetch(`${BASE_URL}${path}`, {
    headers: {
      "X-Figma-Token": process.env.FIGMA_TOKEN!,
    },
    cache: "no-store",
  });

  if (!res.ok) {
    throw new Error(`Figma error: ${res.statusText}`);
  }

  return res.json();
}

Step 4 â€” API route to pull the file
app/api/figma/sync/route.ts
import { figmaFetch } from "@/lib/figma/client";
import fs from "fs/promises";
import path from "path";

export async function POST() {
  const fileKey = process.env.FIGMA_FILE_KEY!;
  const outputDir = path.join(process.cwd(), "tokens");

  await fs.mkdir(outputDir, { recursive: true });

  const file = await figmaFetch(`/files/${fileKey}`);
  const styles = await figmaFetch(`/files/${fileKey}/styles`);

  await fs.writeFile(
    `${outputDir}/figma.raw.json`,
    JSON.stringify({ file, styles }, null, 2)
  );

  return Response.json({ success: true });
}


Now you can run:

curl -X POST http://localhost:3000/api/figma/sync


ğŸ‰ Youâ€™ve officially pulled Figma into Next.js.

Step 5 â€” Extract colors (example)
lib/figma/extractors/colors.ts
export function extractColors(styles: any, file: any) {
  const colorStyles = Object.values(styles.meta.styles).filter(
    (s: any) => s.style_type === "FILL"
  );

  const colors: Record<string, string> = {};

  for (const style of colorStyles as any[]) {
    const node = file.document.children
      .flatMap((p: any) => p.children || [])
      .find((n: any) => n.id === style.node_id);

    if (!node?.fills?.[0]?.color) continue;

    const { r, g, b } = node.fills[0].color;
    colors[style.name] = `rgb(${Math.round(
      r * 255
    )}, ${Math.round(g * 255)}, ${Math.round(b * 255)})`;
  }

  return colors;
}

Step 6 â€” Generate Tailwind v4 globals
lib/tokens/writeTokens.ts
import fs from "fs/promises";

export async function writeGlobals(colors: Record<string, string>) {
  const lines = Object.entries(colors).map(
    ([name, value]) =>
      `  --${name.toLowerCase().replace(/\//g, "-")}: ${value};`
  );

  const css = `
@theme {
${lines.join("\n")}
}
`;

  await fs.writeFile("app/globals.css", css);
}

Step 7 â€” Hook extraction into the API

Back in route.ts:

import { extractColors } from "@/lib/figma/extractors/colors";
import { writeGlobals } from "@/lib/tokens/writeTokens";

const colors = extractColors(styles, file);
await writeGlobals(colors);


Now every sync regenerates your Tailwind tokens ğŸš€

Step 8 â€” Optional UI (recommended)

Add a button:

export default function Page() {
  async function sync() {
    await fetch("/api/figma/sync", { method: "POST" });
  }

  return (
    <button onClick={sync} className="px-4 py-2 bg-black text-white">
      Sync Figma
    </button>
  );
}

What Iâ€™d do next (best ROI)

âœ… Color tokens (done)

ğŸ”¤ Typography â†’ Tailwind font + text tokens

ğŸ“ Spacing scale inference

ğŸ§© Component â†’ shadcn mappings

ğŸ” Watch mode / webhook sync

If you want, I can next:

ğŸ”¥ Harden the extractor to handle nested nodes correctly

ğŸ¨ Convert Figma color modes â†’ Tailwind dark mode

ğŸ§  Generate design-tokens.json (W3C spec)

ğŸ“¦ Package this as npx figma-to-tailwind

Just tell me which direction you want to go.